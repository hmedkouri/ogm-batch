/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Groovy project to get you started.
 * For more details take a look at the Groovy Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.1/userguide/tutorial_groovy_projects.html
 */

// Apply the groovy plugin to add support for Groovy
apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'idea'

sourceCompatibility = 1.8
targetCompatibility = 1.8

compileJava {
    options.encoding = "UTF-8"
    options.compilerArgs << '-parameters'
    //options.compilerArgs << '-Xlint:unchecked'
}

compileTestJava {
    options.compilerArgs << '-parameters'
    //options.compilerArgs << '-Xlint:unchecked'
}


// In this section you declare where to find the dependencies of your project
repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
    maven {
        url "https://nexus.acuo.com/repository/maven-public/"
    }
}

ext.versions = [
        common      : '0.14.0-SNAPSHOT',
        mapping     : '0.14.0-SNAPSHOT',
        logback     : '1.2.1',
        guice       : '4.1.0',
        neo4j       : '3.3.1',
        neo4jOgm    : '3.0.2',
        slf4j       : '1.7.23',
        strata      : '1.3.3',
        spock       : '1.1-groovy-2.4',
]

dependencies {
    implementation ("com.acuo.collateral:acuo-common:${versions.common}") { changing = true }
    implementation ("com.acuo.collateral:acuo-mapping:${versions.mapping}") { changing = true }

    // Use the latest Groovy version for building this library
    implementation 'org.codehaus.groovy:groovy-all:2.4.11'

    implementation ("org.neo4j:neo4j-enterprise:${versions.neo4j}") {
        exclude group: 'org.slf4j'
        exclude group: 'org.neo4j', module: 'neo4j-cypher-compiler-2.3'
        exclude group: 'org.neo4j', module: 'neo4j-cypher-compiler-3.0'
        exclude group: 'org.neo4j', module: 'neo4j-cypher-frontend-2.3'
        exclude group: 'org.neo4j', module: 'neo4j-cypher-frontend-3.0'
    }

    implementation (
            "org.neo4j:neo4j-ogm-core:${versions.neo4jOgm}",
            "org.neo4j:neo4j-ogm-http-driver:${versions.neo4jOgm}",
            "org.neo4j:neo4j-ogm-bolt-driver:${versions.neo4jOgm}",
            "org.neo4j:neo4j-ogm-embedded-driver:${versions.neo4jOgm}"
    )

    implementation(
            "com.opengamma.strata:strata-basics:${versions.strata}",
            "com.opengamma.strata:strata-product:${versions.strata}",
    )

    implementation(
            "com.google.inject:guice:${versions.guice}",
            "com.google.inject.extensions:guice-multibindings:${versions.guice}",
            "com.google.inject.extensions:guice-servlet:${versions.guice}",
            "com.google.inject.extensions:guice-assistedinject:${versions.guice}",
            "com.google.inject.extensions:guice-persist:${versions.guice}"
    )

    implementation(
            "com.mycila.guice.extensions:mycila-guice-jsr250:4.0.rc1",
            "com.mycila.guice.extensions:mycila-guice-closeable:4.0.rc1"
    )

    runtimeOnly (
            "ch.qos.logback:logback-classic:${versions.logback}",
            "ch.qos.logback:logback-access:${versions.logback}",
            "org.slf4j:log4j-over-slf4j:${versions.slf4j}",
            "org.slf4j:jcl-over-slf4j:${versions.slf4j}",
            "org.slf4j:jul-to-slf4j:${versions.slf4j}"
    )

    testImplementation ("org.neo4j.test:neo4j-harness-enterprise:${versions.neo4j}"){
        exclude group: 'org.slf4j'
        exclude group: 'org.neo4j', module: 'neo4j-cypher-compiler-2.3'
        exclude group: 'org.neo4j', module: 'neo4j-cypher-compiler-3.0'
        exclude group: 'org.neo4j', module: 'neo4j-cypher-frontend-2.3'
        exclude group: 'org.neo4j', module: 'neo4j-cypher-frontend-3.0'
    }

    testImplementation (
            "org.spockframework:spock-core:${versions.spock}",
            "org.spockframework:spock-guice:${versions.spock}"
    )
}

